<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3BHK cleaning Service Registration Form</title>
    <link rel="stylesheet" href="allstyle.css">
</head>

<body>
    <div class="form-container">
        <h2>3BHK Cleaning Service Registration</h2>
        <form id="acRepairForm" onsubmit="return popup_window(event)">

            <label for="date">Preferred Service Date:</label>
            <input type="date" id="date" name="date" required>

            <label for="date">Preferred Slot:</label>
            <select name="slot_name" id="slot_name" required>
                <option value="">Select Any Option</option>
                <option value="Morning (9:00 -12:00)">Morning</option>
                <option value="Afternoon (12:00 - 4:00)">Afternoon</option>
                <option value="Evening (4:00 - 9:00)">Evening</option>
            </select>

            <label for="address">Address:</label>
            <input type="text" id="address" name="address" required>

            <label for="vendor">Choose a vendor:</label>

            <select name="vendor" id="model_name">
                <option value="">Select Any Option</option>
                <option value="No Broker">No Broker</option>
                <option value="Urban Company">Urban Company</option>
                <option value="Vijay">Vijay</option>
                <option value="Tidyhome">Tidyhome</option>
            </select>
            <!-- <label for="amount">Amount:</label>
            <input type="amt" id="amount" name="amount" value="2500" disabled> -->

            <label for="issue">Amount</label>
            <p id="price"></p>

            <label for="issue">Description of Issue/Problem:</label>
            <textarea id="issue" name="issue" rows="1"></textarea>

            <input type="submit" value="Confirm Booking" id="submitbutton">
        </form>
    </div>
    <div class="img-container">
        <img src="../Images/3bhk.png" alt="img">
    </div>
    <!-- For Popup Window Screen ========================> -->

    <!-- Popup Background -->
    <div id="myModal" class="modal">
        <!-- Popup Window  -->
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <center>
                    <h2>Service Booked Successfully.</h2>
                </center>
            </div>
            <div class="modal-body">
                <p><b>Service ID: </b><span id="service_id"></span></p>
                <p><b>Service Booked Date: </b><span id="pop_usr_name"></span></p>
                <p><b>Booked Slot at: </b><span id="slot_id"></span></p>
                <p><b>Vendor Name: </b><span id="pop_email"></span></p>
            </div>
        </div>
    </div>



    <!-- ==================================================> -->


    <script>

        var modal = document.getElementById("myModal");


        // ID of "X" Button
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on "X" button it will close the popup
        span.onclick = function () {
            modal.style.display = "none";
            document.getElementById("acRepairForm").reset();
            document.getElementById("price").innerText = "";
        };


        // When the user clicks anywhere outside of the popup, it will close it
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
                login_pop.style.display = "none";
                document.getElementById("acRepairForm").reset();
                document.getElementById("price").innerText = "";
            }
        };


        // main function of popup
        function popup_window(ev) {
            ev.preventDefault();

            let usr_date = document.getElementById("date").value;
            let usr_slot = document.getElementById("slot_name").value;
            let usr_model_name = document.getElementById("model_name").value;
            let service_id = "Serv/" + usr_model_name + "/001";
            modal.style.display = "block";
            document.getElementById("service_id").innerText =
                "  " + service_id;
            document.getElementById("pop_usr_name").innerText =
                " " + usr_date;
            document.getElementById("slot_id").innerText =
                " " + usr_slot;
            document.getElementById("pop_email").innerText =
                " " + usr_model_name;
        }



        // To change the price of the service=======================================================>
        document.addEventListener("change", function () {
            var slot = document.getElementById("slot_name").value;
            let brand = document.getElementById("model_name").value;
            if (slot === "Morning (9:00 -12:00)") {
                switch (brand) {
                    case 'Tidyhome':
                        document.getElementById("price").innerText = "₹ 1000";
                        break;

                    case 'Vijay':
                        document.getElementById("price").innerText = "₹ 990";
                        break;

                    case 'Urban Company':
                        document.getElementById("price").innerText = "₹ 1200";
                        break;

                    case 'No Broker':
                        document.getElementById("price").innerText = "₹ 1100";
                        break;

                    default:
                        document.getElementById("price").innerText = "";
                }
            }

            else if (slot === "Afternoon (12:00 - 4:00)") {
                switch (brand) {
                    case 'Tidyhome':
                        document.getElementById("price").innerText = "₹ 600";
                        break;

                    case 'Vijay':
                        document.getElementById("price").innerText = "₹ 750";
                        break;

                    case 'Urban Company':
                        document.getElementById("price").innerText = "₹ 700";
                        break;

                    case 'No Broker':
                        document.getElementById("price").innerText = "₹ 900";
                        break;

                    default:
                        document.getElementById("price").innerText = "";
                }
            }

            if (slot === "Evening (4:00 - 9:00)") {
                switch (brand) {
                    case 'Tidyhome':
                        document.getElementById("price").innerText = "₹ 1100";
                        break;

                    case 'Vijay':
                        document.getElementById("price").innerText = "₹ 1550";
                        break;

                    case 'Urban Company':
                        document.getElementById("price").innerText = "₹ 1600";
                        break;

                    case 'No Broker':
                        document.getElementById("price").innerText = "₹ 1000";
                        break;

                    default:
                        document.getElementById("price").innerText = "";
                }
            }
        });

        // ===============================================================================================>


        // Here i disabled the date before todays date===========================================>
        window.onload = function () {
            var today = new Date().toISOString().split('T')[0];
            document.getElementsByName("date")[0].setAttribute('min', today);
        }

// ===============================================================================>

    </script>
</body>

</html>